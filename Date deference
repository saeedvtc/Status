<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† ØªØ§Ø±ÙŠØ®ÙŠÙ†</title>

<!-- Ù…ÙƒØªØ¨Ø© jsPDF Ù„Ø¥Ù†Ø´Ø§Ø¡ PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
    body {
        font-family: "Arial", sans-serif;
        direction: rtl;
        background: #f2f2f2;
        padding: 20px;
        font-size: 22px;
    }

    h1 {
        text-align: center;
        margin-bottom: 25px;
        font-size: 32px;
    }

    .date-pair {
        margin-bottom: 20px;
        background: #ffffff;
        padding: 15px;
        border-radius: 10px;
        border: 1px solid #ccc;
    }

    label {
        font-size: 22px;
        font-weight: bold;
    }

    input[type="date"] {
        padding: 10px;
        font-size: 20px;
        width: 100%;
        margin-top: 10px;
        margin-bottom: 15px;
    }

    button {
        padding: 12px 18px;
        font-size: 22px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px 5px;
    }

    .add-btn {
        background: #007bff;
        color: white;
    }
    .calc-btn {
        background: #28a745;
        color: white;
    }
    .pdf-btn {
        background: #663399;
        color: white;
    }
    .remove-btn {
        background: #e91e63;
        color: white;
        margin-top: 10px;
    }

    #result {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #ccc;
        margin-top: 20px;
        font-size: 26px;
        font-weight: bold;
        line-height: 40px;
    }

    #totalDays {
        font-size: 30px;
        font-weight: bold;
        margin-top: 20px;
        color: #d9534f;
    }
</style>

</head>
<body>

<h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† ØªØ§Ø±ÙŠØ®ÙŠÙ†</h1>

<div id="dateContainer"></div>

<button class="add-btn" onclick="addDatePair()">â• Ø¥Ø¶Ø§ÙØ© ØªØ§Ø±ÙŠØ®ÙŠÙ†</button>
<button class="calc-btn" onclick="calculateAllDifferences()">ğŸ“Š Ø§Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚</button>
<button class="pdf-btn" onclick="generatePDF()">ğŸ“„ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF</button>

<div id="result"></div>
<div id="totalDays"></div>

<script>
let pairCount = 0;

function addDatePair() {
    pairCount++;
    const div = document.createElement("div");
    div.className = "date-pair";
    div.id = "pair" + pairCount;

    div.innerHTML = `
        <label>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„:</label>
        <input type="date" class="date1">

        <label>Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ù†ÙŠ:</label>
        <input type="date" class="date2">

        <button class="remove-btn" onclick="removeDatePair('pair${pairCount}')">ğŸ—‘ Ø­Ø°Ù Ø§Ù„Ø­Ù‚Ù„</button>
    `;

    document.getElementById("dateContainer").appendChild(div);
}

// Ø­Ø°Ù Ø­Ù‚Ù„
function removeDatePair(id) {
    document.getElementById(id).remove();
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ + ÙŠÙˆÙ… Ø¥Ø¶Ø§ÙÙŠ
function calculateAllDifferences() {
    const pairs = document.querySelectorAll(".date-pair");
    let results = "";
    let total = 0;

    pairs.forEach((pair, i) => {
        const d1 = new Date(pair.querySelector(".date1").value);
        const d2 = new Date(pair.querySelector(".date2").value);

        if (isNaN(d1) || isNaN(d2)) {
            results += `Ø§Ù„Ø­Ù‚Ù„ ${i+1}: âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ®ÙŠÙ† ØµØ­ÙŠØ­ÙŠÙ†<br>`;
        } else {
            let diff = Math.ceil(Math.abs(d2 - d1) / (1000 * 60 * 60 * 24)) + 1;

            results += `â— Ø§Ù„Ø­Ù‚Ù„ ${i+1}: ${diff} ÙŠÙˆÙ…<br>`;
            total += diff;
        }
    });

    document.getElementById("result").innerHTML = results;
    document.getElementById("totalDays").innerHTML = `ğŸ“Œ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ÙŠØ§Ù…: ${total} ÙŠÙˆÙ…`;
}

// Ø¥Ù†Ø´Ø§Ø¡ PDF
function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let y = 20;

    doc.setFontSize(18);
    doc.text("ØªÙ‚Ø±ÙŠØ± Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®", 10, y);
    y += 15;

    const pairs = document.querySelectorAll(".date-pair");
    let total = 0;

    pairs.forEach((pair, i) => {
        const d1 = pair.querySelector(".date1").value;
        const d2 = pair.querySelector(".date2").value;

        if (!d1 || !d2) return;

        const date1 = new Date(d1);
        const date2 = new Date(d2);

        let diff = Math.ceil(Math.abs(date2 - date1) / (1000 * 60 * 60 * 24)) + 1;

        total += diff;

        doc.setFontSize(14);
        doc.text(`Ø§Ù„Ø­Ù‚Ù„ ${i+1}: ${diff} ÙŠÙˆÙ… (Ù…Ù† ${d1} Ø¥Ù„Ù‰ ${d2})`, 10, y);
        y += 10;
    });

    y += 10;
    doc.setFontSize(16);
    doc.text(`Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù…: ${total} ÙŠÙˆÙ…`, 10, y);

    doc.save("ØªÙ‚Ø±ÙŠØ±_Ø§Ù„Ø§ÙŠØ§Ù….pdf");
}

// Ø¥Ø¶Ø§ÙØ© Ø£ÙˆÙ„ Ø­Ù‚Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
addDatePair();
</script>

</body>
</html>
