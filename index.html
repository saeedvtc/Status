<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>حساب الأيام والشهور والسنوات</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        input, button { padding: 10px; margin: 10px 0; font-size: 16px; }
        .result { margin-top: 20px; font-size: 18px; font-weight: bold; }
        .violation { font-size: 28px; color: red; font-weight: bold; }
        .ok { font-size: 24px; color: green; font-weight: bold; }
    </style>
</head>
<body>

    <h2>حساب الأيام والشهور والسنوات فوق 179 يوم</h2>

    <label>تاريخ الخروج:</label><br>
    <input type="date" id="exitDate"><br>

    <button onclick="calculate()">احسب</button>

    <div class="result" id="output"></div>

    <script>
        function calculate() {
            let exitDate = new Date(document.getElementById("exitDate").value);

            if (!document.getElementById("exitDate").value) {
                document.getElementById("output").innerHTML = "⚠ الرجاء إدخال تاريخ الخروج.";
                return;
            }

            let today = new Date();

            // حساب الفرق الكلي بالأيام
            let totalDays = Math.floor((today - exitDate) / (1000 * 60 * 60 * 24));

            // حساب السنوات
            let years = today.getFullYear() - exitDate.getFullYear();
            let months = today.getMonth() - exitDate.getMonth();
            let days = today.getDate() - exitDate.getDate();

            if (days < 0) {
                months -= 1;
                let prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                days += prevMonth.getDate();
            }

            if (months < 0) {
                years -= 1;
                months += 12;
            }

            let status = totalDays > 179 ? "مخالف" : "غير مخالف";
            let className = totalDays > 179 ? "violation" : "ok";

            document.getElementById("output").innerHTML =
                "تاريخ القدوم (تلقائي): " + today.toISOString().split("T")[0] + "<br><br>" +
                "الفرق: " + days + " أيام، " + months + " شهور، " + years + " سنوات<br>" +
                "الحالة: <span class='" + className + "'>" + status + "</span>";
        }
    </script>

</body>
</html>
