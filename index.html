<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>حاسبة المكوث خارج الدولة</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center; /* توسيط أفقياً */
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding-top: 40px; /* مسافة من الأعلى */
            background: linear-gradient(to bottom, #e0f7fa, #ffffff); /* خلفية جذابة */
        }

        .calculator {
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 450px;
            width: 90%;
        }

        h2 {
            font-size: 32px;
            margin-bottom: 25px;
            color: #00796b;
        }

        label {
            font-size: 20px;
            display: block;
            margin-bottom: 10px;
        }

        input[type="date"] {
            padding: 12px;
            font-size: 18px;
            width: 80%;
            border: 2px solid #00796b;
            border-radius: 8px;
        }

        button {
            font-size: 20px;
            padding: 12px 25px;
            margin-top: 15px;
            cursor: pointer;
            background-color: #00796b;
            color: white;
            border: none;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #004d40;
        }

        .result { 
            margin-top: 25px; 
            font-size: 24px; 
            font-weight: bold; 
            text-align: center; 
        }

        .violation { font-size: 32px; color: red; font-weight: bold; }
        .ok { font-size: 28px; color: green; font-weight: bold; }
        .extra { font-size: 28px; color: red; font-weight: bold; }
        .total-days { font-size: 26px; color: #000; margin-top: 8px; }
    </style>
</head>
<body>

    <div class="calculator">
        <h2>حاسبة المكوث خارج الدولة</h2>

        <label>تاريخ الخروج:</label>
        <input type="date" id="exitDate"><br>

        <button onclick="calculate()">احسب</button>

        <div class="result" id="output"></div>
    </div>

    <script>
        function calculate() {
            let exitDate = new Date(document.getElementById("exitDate").value);

            if (!document.getElementById("exitDate").value) {
                document.getElementById("output").innerHTML = "⚠ الرجاء إدخال تاريخ الخروج.";
                return;
            }

            let today = new Date();

            // حساب الفرق الكلي بالأيام
            let totalDays = Math.floor((today - exitDate) / (1000 * 60 * 60 * 24));

            // حساب السنوات، الشهور، الأيام
            let years = today.getFullYear() - exitDate.getFullYear();
            let months = today.getMonth() - exitDate.getMonth();
            let days = today.getDate() - exitDate.getDate();

            if (days < 0) {
                months -= 1;
                let prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                days += prevMonth.getDate();
            }

            if (months < 0) {
                years -= 1;
                months += 12;
            }

            // تحويل التاريخ إلى DD/MM/YYYY
            let todayFormatted = today.getDate().toString().padStart(2,'0') + '/' +
                                 (today.getMonth()+1).toString().padStart(2,'0') + '/' +
                                 today.getFullYear();

            let status = totalDays > 179 ? "مخالف" : "غير مخالف";
            let className = totalDays > 179 ? "violation" : "ok";

            let extraDays = totalDays > 179 ? totalDays - 179 : 0;

            document.getElementById("output").innerHTML =
                "تاريخ القدوم (تلقائي): " + todayFormatted + "<br><br>" +
                "الفرق: " + days + " أيام، " + months + " شهور، " + years + " سنوات<br>" +
                "<div class='total-days'>العدد الكلي بالأيام: " + totalDays + "</div><br>" +
                "الحالة: <span class='" + className + "'>" + status + "</span>" +
                (extraDays > 0 ? "<br>تعدي مدة السماح: <span class='extra'>" + extraDays + " يوم</span>" : "");
        }
    </script>

</body>
</html>
